<div>
	<form name="frmaddfile" id="frmaddfile" action="#">

		<div id="tabs" style="background: none">
			<ul>
				<li><a href="#tabs-1">File Details</a></li>
				<li><a href="#tabs-2">Proxy Details</a></li>


			</ul>
			<input type="hidden" id="operation" name="operation" value="" />
			<div id="tabs-1" style="background-color: #F7F7F7">
				<h2>File</h2>

				<table border="0"
					style="width: 100%; padding: 10px; border-collapse: separate; border-spacing: 10px;">

					<tr>
						<td>

							<div title="host">Host</div> <input type="text" name="host"
							id="host" value="10.21.15.74"
							class="text ui-widget-content ui-corner-all">
						</td>
						<td>
							<div title="port">Port</div> <input type="text" name="port"
							id="port" value="24" class="text ui-widget-content ui-corner-all">

						</td>
					</tr>

					<tr>
						<td>

							<div title="user">User</div> <input type="text" name="user"
							id="user" value="resolve"
							class="text ui-widget-content ui-corner-all">
						</td>

						<td>
							<div title="password">Password</div> <input type="password"
							name="password" id="password" value=""
							class="text ui-widget-content ui-corner-all">

						</td>

					</tr>
					<tr>
						<td>

							<div title="Group">Environment</div> <select name="filegroup"
							id="filegroup" style="width: 200px">

								<option value="AR">AR</option>
						</select>

						</td>

						<td>
							<div title="team">Team</div> <select name="team" id="team"
							style="width: 200px">
								<option value="RESOLVE">RESOLVE</option>
								<option value="Provisioning">Provisioning</option>
								<option value="Service Checker">Service Checker</option>
						</select>
						</td>

					</tr>




				</table>



			</div>
			<div id="tabs-2" style="background-color: #F7F7F7">
				<h2>Proxy</h2>



				<table border="0"
					style="width: 100%; padding: 10px; border-collapse: separate; border-spacing: 10px;">

					<tr>
						<td>
							<div title="host">Host</div> <input type="text" name="proxyhost"
							id="proxyhost" value="10.21.15.74"
							class="text ui-widget-content ui-corner-all">
						</td>

						<td>
							<div title="port">Port</div> <input type="text" name="proxyport"
							id="proxyport" value="8080"
							class="text ui-widget-content ui-corner-all">
						</td>
					<tr>
						<td>

							<div title="user">User</div> <input type="text" name="proxyuser"
							id="proxyuser" value="resolve"
							class="text ui-widget-content ui-corner-all">
						</td>

						<td>

							<div title="password">Password</div> <input type="password"
							name="proxypwd" id="proxypwd" value="xxxxxxx"
							class="text ui-widget-content ui-corner-all">

						</td>
					</tr>


				</table>


			</div>

		</div>
	</form>

	<div id="fileresultstatuscontainer" />



	<table border="0"
		style="width: 95%; padding: 10px; border-collapse: separate; border-spacing: 10px;">

		<tr>
			<td class="ralign" colspan="2">
				<p class="validateTips">&nbsp;</p>
			</td>
		</tr>
		<tr>
			<td class="lalign">
				<button type="button" class="btnbackfilelist">Back</button>
			</td>
			<td class="ralign">
				<button type="button" class="btnsubmitfile">Save</button>
			</td>
		</tr>
	</table>
</div>

<script>
  
  
  function initmanagefiles(){
		 
	  generateCsvMenu("team",$("#teams").val())
	 	 
	 	 generateCsvMenu("filegroup",$("#environments").val())
	 	 
	 	 	   
	 	       $( "#filegroup" ).selectmenu({
	 //  change: function( event, data ) {
//	  	 // if(data.item.value == "custom"){
//	  		 }
	 		});


	     $( "#team" ).selectmenu({
	 // change: function( event, data ) {

	  });
	     
	 	 
	  }
	     
	     
	 function setmanagefiledata(curdata,dataoperation){
		 

		  $("form#frmaddfile input").val("")
		  
		  
		  $xml = $(curdata)
		 // console.log($xml)
				 $xml.each(function(index){
					 //Parse here
					 
					var host =  $(this).find('host').text();
	 				var port =  $(this).find('port').text();
	 				var user =  $(this).find('user').text();
	 				var password =  $(this).find('password').text();
	 				var proxyhost =  $(this).find('proxyhost').text();
	 				var proxyport =  $(this).find('proxyport').text();
	 				var proxyuser =  $(this).find('proxyuser').text();
	 				var proxypwd =  $(this).find('proxypwd').text();
	 				
	 				var group = $(this).find('group').text();
	 				
	 				var team = $(this).find('team').text();
	 				
	 				//console.log($(this))
	 				$("#user").val(user)
	 				$("#password").val(password)
	 				$("#host").val(host)
	 				$("#port").val(port)
	 				$("#proxyuser").val(proxyuser)
	 				$("#proxypwd").val(proxypwd)
	 				$("#proxyhost").val(proxyhost)
	 				$("#proxyport").val(proxyport)
	 				
	 				//$("#proxyport").val()
	 				//$("#filegroup").selectmenu("value", group);
	 				//$("#team").selectmenu("value", team);
	 				
	 				
	 			//	$("#filegroup").val(group).trigger("change");
	 				
	 				$( "#filegroup" )
	 				 	.val(group)
	 				 	.selectmenu("refresh")
	 				 	.trigger("change")
	 				 	
	 				 	
	 				//$("#team").val(team).trigger("change");
	 				
	 				 $( "#team" )
	 				 	.val(team)
	 				 	.selectmenu("refresh")
	 				 	.trigger("change")
	 				
	 				
				 })
				 
				$("#operation").val(dataoperation)
	  		
				
		 
	 }    
	 
  function onupdate(){
	  
	  if(!validateform()){
		  
		  return
	  }
		$("#fileresultstatuscontainer").show()
	  	  $("#fileresultstatuscontainer").html("<img src='images/loadingajax.gif'/>")
	  	  
	  	  
 var formdata=$("form#frmaddfile").serializeArray()
 		
 	//	$('#frmfile')[0].reset();
 $("form#frmaddfile input").attr("disabled",true)
  		
  	$.post( "/services/updatefile", formdata)
 	 	  .done(function( data ) {
 	 	    
 	 		
 	 		//parse xml
 	 		  $xml = $( data )
 	 		  $status = $xml.find( "status" )
 	 		  
 	 		  $("form#frmaddfile input").removeAttr("disabled")
 	 		  
 	 		  if( $status.attr("error") =="true"){
 	 			
 	 			  showerror("fileresultstatuscontainer",$status.attr("description"))
 	 			  
 	 		  } else{
 	 			$("form#frmaddfile input").val("")
 	 		  
 	 			 showsuccess("fileresultstatuscontainer",$status.attr("description"))
 	 		  }
 	 		  
 	 		 
 		
 	});
  	
  	
	  
  }
  
  function updateTips( t ) {
	  var tips = $( ".validateTips" );
	  
      tips
        .text( t )
        .addClass( "ui-state-highlight" );
      setTimeout(function() {
        tips.removeClass( "ui-state-highlight", 1500 );
      }, 500 );
    }
 
    function checkLength( o, n, min, max ) {
      if ( o.val().length > max || o.val().length < min ) {
        o.addClass( "ui-state-error" );
        updateTips( "Length of " + n + " must be between " +
          min + " and " + max + "." );
        return false;
      } else {
        return true;
      }
    }
    
    function checkMinLength( o, n, min ) {
        if ( o.val().length < min ) {
          o.addClass( "ui-state-error" );
          updateTips( "Length of " + n + " must be atleast " +
            min + " characters." );
          return false;
        } else {
          return true;
        }
      }
 
    function checkRegexp( o, regexp, n ) {
      if ( !( regexp.test( o.val() ) ) ) {
        o.addClass( "ui-state-error" );
        updateTips( n );
        return false;
      } else {
        return true;
      }
    }
    
  
  function validateform(){
	  
	 
		var valid=true;
	  valid = valid && checkMinLength( $("#user"), "user", 3 );
  valid = valid && checkMinLength( $("#password"), "password", 3 );
  valid = valid && checkMinLength( $("#host"), "host", 7 );
  		valid = valid && checkRegexp( $("#port"), /^([0-9])+$/i, "Port should contain only numeric values." );
  
  		if(!valid){
  			
  			$( "#tabs" ).tabs( "option", "active", 0 );
  		}
  		if($("#proxyhost").val().length >1){
  			
  			
  		  valid = valid && checkMinLength( $("#proxyuser"), "proxyuser", 3 );
  		  valid = valid && checkMinLength( $("#proxypwd"), "proxy Password", 3 );
  		  valid = valid && checkMinLength( $("#proxyhost"), "proxy host", 7 );
  		  		valid = valid && checkRegexp( $("#proxyport"), /^([0-9])+$/i, "Port should contain only numeric values." );
  		
  		  	if(!valid){
  	  			
  		  	$( "#tabs" ).tabs( "option", "active", 1 );	
  	  		}
  		}
  
      return valid;
      
      
  }
 
  $(function() {
	  
	 


    
    $("form#frmaddfile input").change(function() {
    	$(this).removeClass("ui-state-error")
    	$( ".validateTips" ).text("")
    });
    
    $("form#frmaddfile input").click(function() {
    	$(this).removeClass("ui-state-error")
    	$( ".validateTips" ).text("")
    });
    
    $( "#tabs" ).tabs().addClass( "ui-tabs-vertical ui-helper-clearfix" );
    $( "#tabs li" ).removeClass( "ui-corner-top" ).addClass( "ui-corner-left" );
    
    $( ".btnsubmitfile" ).button( {
        icons: {
          primary: "ui-icon-disk"
        }
      });
    
    //$( "#btnadd" ).button({ icons: { primary: "ui-icon-gear", secondary: "ui-icon-triangle-1-s" } });

    //ui-icon-plusthick
    
    $( ".btnsubmitfile" ).click(function( event ) {
    	 onupdate();
   	 
   	
    })
    
    
     $( ".btnbackfilelist" ).button( {
        icons: {
          primary: "ui-icon-arrowthick-1-w"
        }
      });
    
    //$( "#btnadd" ).button({ icons: { primary: "ui-icon-gear", secondary: "ui-icon-triangle-1-s" } });

    //ui-icon-plusthick
    
    $( ".btnbackfilelist" ).click(function( event ) {
    	 
    	  showmanagefilecontainer(false)
    	  showfilereport()
   	 //addfile();
    })
    
    
    
    
    
  });
  </script>


